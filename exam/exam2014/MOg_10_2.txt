There are a lot of researches and opinions about the main reason, which forms person's character. It may be genetic code or our life experience. I think that our personality depends on these both factors, but the major one is our past and lessons that we have learned from it. 
The first step of shaping of personality is, of course, family. Parents often become a kind of "example" for their children, making them try to behave like a mother or a father, no matter whether the "example" is good or bad. But it does not neccessary mean that the child's behavior is based on gens. There are a lot of cases when children from families with bad conditions (for raising a child) became brilliant scientists, musicians, artists and so on. 
The next key step is communication with classmates and groupmates during the educational process in schools and universities. Relations with people of the same age are essential for teenagers and their future way of behavior. Exactly in teen years the most part of persons characteristics finally forms and it is hardly can be changed or improved in the future. Self-confidence, some leaders characteristics are also formed by communication, romantic, work and educational experience. 
To conclude, I can add that each person can create, change and improve his or her personality in good or bad side.